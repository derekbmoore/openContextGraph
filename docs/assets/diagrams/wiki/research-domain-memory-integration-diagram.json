{
  "title": "Domain Memory Integration — Solving the Green Intern Problem",
  "type": "architecture",
  "nodes": [
    { "id": "problem", "label": "Problem: Green Intern (forgets context between sessions)", "type": "rect", "color": "#ef4444" },
    { "id": "solution", "label": "Solution: Domain Memory (persistent project knowledge)", "type": "rect", "color": "#22c55e" },
    { "id": "domain_memory", "label": "Domain Memory File (.ctxeco/domain-memory.md)", "type": "rect", "color": "#60a5fa" },
    { "id": "git_scanner", "label": "Git Commit Log Scanner (scan_commit_history tool)", "type": "rect", "color": "#34d399" },
    { "id": "memory_updater", "label": "Domain Memory Updater (update_domain_memory tool)", "type": "rect", "color": "#a78bfa" },
    { "id": "rpi", "label": "RPI Pattern: Research (Domain Memory + Git) → Plan → Implement", "type": "rect", "color": "#f59e0b" },
    { "id": "layer1", "label": "Layer 1: Domain Memory (project-specific, in repo)", "type": "rect", "color": "#60a5fa" },
    { "id": "layer2", "label": "Layer 2: Episodic Memory (Zep sessions, conversation history)", "type": "rect", "color": "#34d399" },
    { "id": "layer3", "label": "Layer 3: Semantic Memory (Tri-Search™, knowledge graph)", "type": "rect", "color": "#f59e0b" },
    { "id": "antigravity", "label": "Antigravity Router: Ingest Domain Memory as Class A (decay: 0.01)", "type": "rect", "color": "#22c55e" },
    { "id": "trisearch", "label": "Tri-Search™: Boost Domain Memory results (+0.3 score)", "type": "rect", "color": "#f59e0b" },
    { "id": "self_enrich", "label": "Self-Enriching Workflow: Update Domain Memory → Ingest to Zep", "type": "rect", "color": "#a78bfa" },
    { "id": "benefit", "label": "Benefit: Agents remember patterns, avoid mistakes, understand why", "type": "note", "color": "#22c55e" }
  ],
  "edges": [
    { "source": "problem", "target": "solution", "label": "solved by" },
    { "source": "solution", "target": "domain_memory", "label": "creates" },
    { "source": "domain_memory", "target": "git_scanner", "label": "populated by" },
    { "source": "git_scanner", "target": "memory_updater", "label": "feeds" },
    { "source": "memory_updater", "target": "domain_memory", "label": "updates" },
    { "source": "solution", "target": "rpi", "label": "enables" },
    { "source": "rpi", "target": "layer1", "label": "uses" },
    { "source": "layer1", "target": "layer2", "label": "enhances" },
    { "source": "layer2", "target": "layer3", "label": "enhances" },
    { "source": "domain_memory", "target": "antigravity", "label": "ingested via" },
    { "source": "domain_memory", "target": "trisearch", "label": "searchable via" },
    { "source": "memory_updater", "target": "self_enrich", "label": "triggers" },
    { "source": "solution", "target": "benefit", "label": "delivers" }
  ]
}
